Установка начального состояния
Компонент React может получить доступ к динамической информации двумя способами: propsи state.

В отличие props, а компонента stateявляется не передается извне. Компонент сам решает state.

Чтобы компонент имел свойство, stateприсвойте ему stateсвойство. Это свойство следует объявить внутри метода конструктора, например:

class Example extends React.Component {
  constructor(props) {
    super(props);
    this.state = { mood: 'decent' };
  }
 
  render() {
    return <div></div>;
  }
}
 
<Example />
Ого, метод конструктора? super(props)? Что тут происходит? Давайте более внимательно посмотрим на этот потенциально незнакомый код:

constructor(props) {
  super(props);
  this.state = { mood: 'decent' };
}
this.stateдолжен быть равен объекту, как в примере выше. Этот объект представляет начальное «состояние» любого экземпляра компонента. Мы объясним это позже!

Как насчет остальной части кода? constructorи superобе являются особенностями ES6, а не только React. Здесь нет ничего особенно React-ы об их использовании. Полное объяснение их функциональность выходит за рамки данного курса, но мы рекомендуем приобщение себя . Важно отметить, что компоненты React всегда должны вызывать superсвои конструкторы для правильной настройки.

Посмотрите на нижнюю часть самого высокого примера кода в этом столбце. <Example />имеет a state, а его stateравно { mood: 'decent' }.

=====================================================================

Доступ к состоянию компонента
Чтобы прочитать компонент state, используйте выражение this.state.name-of-property:

class TodayImFeeling extends React.Component {
  constructor(props) {
    super(props);
    this.state = { mood: 'decent' };
  }
 
  render() {
    return (
      <h1>
        I'm feeling {this.state.mood}!
      </h1>
    );
  }
}
Вышеупомянутый класс компонентов считывает свойство stateизнутри своей renderфункции.

Точно так же this.propsвы можете использовать this.stateлюбое свойство, определенное внутри тела класса компонента.

=====================================================================================

Обновить состояние с помощью this.setState
Компонент может делать больше, чем просто читать свое собственное состояние. Компонент также может изменять свое собственное состояние.

Компонент изменяет свое состояние, вызывая функцию this.setState().

this.setState()принимает два аргумента: объект , который обновит состояние компонента, и обратный вызов. Вам вообще не нужен обратный вызов.

В редакторе кода взгляните на Example.js . Обратите внимание, что <Example />имеет состояние:

{
  mood:   'great',
  hungry: false
}
Теперь предположим, что это <Example />был вызов:

this.setState({ hungry: true });
После этого вызова <Example />состояние будет следующим:

{
  mood:   'great',
  hungry: true
}
moodЧасть государства остается неизменной!

this.setState()принимает объект и объединяет этот объект с текущим состоянием компонента. Если в текущем состоянии есть свойства, которые не являются частью этого объекта, то эти свойства остаются такими, какими они были.

