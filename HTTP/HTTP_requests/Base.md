HTTP-запрос GET
HTTP- GETзапросы выполняются с целью получения информации или данных из источника (сервера) через Интернет.

GETзапросы не имеют тела , поэтому информация, которая требуется источнику для возврата правильного ответа, должна быть включена в путь URL-адреса запроса или строку запроса.

==============================================================================

JSON: нотация объектов JavaScript
JSON или JavaScript Object Notation - это формат данных, подходящий для передачи данных на сервер и с сервера.

По сути, это немного более строгая версия объекта Javascript. Объект JSON должен быть заключен в фигурные скобки и может содержать одну или несколько пар свойство-значение. Имена JSON требуют двойных кавычек, а стандартные объекты Javascript - нет.

const jsonObj = {
  "name": "Rick",
  "id": "11A",
  "level": 4  
};

===============================================================


HTTP-запрос GET
HTTP- GETзапросы выполняются с целью получения информации или данных из источника (сервера) через Интернет.

GETзапросы не имеют тела , поэтому информация, которая требуется источнику для возврата правильного ответа, должна быть включена в путь URL-адреса запроса или строку запроса.

JSON: нотация объектов JavaScript
JSON или JavaScript Object Notation - это формат данных, подходящий для передачи данных на сервер и с сервера.

По сути, это немного более строгая версия объекта Javascript. Объект JSON должен быть заключен в фигурные скобки и может содержать одну или несколько пар свойство-значение. Имена JSON требуют двойных кавычек, а стандартные объекты Javascript - нет.

const jsonObj = {
  "name": "Rick",
  "id": "11A",
  "level": 4  
};
=========================================================================================
HTTP POST запрос
HTTP- POSTзапросы выполняются с целью отправки новой информации источнику (серверу), который ее получит.

Для POSTзапроса новая информация сохраняется в теле запроса.

===============================================================
Асинхронные вызовы с XMLHttpRequest
AJAX позволяет выполнять HTTP-запросы не только во время загрузки веб-страницы, но и в любое время после ее первоначальной загрузки. Это позволяет добавлять динамическое поведение к веб-странице. Это важно для обеспечения хорошего взаимодействия с пользователем без перезагрузки веб-страницы для передачи данных на веб-сервер и с него.

Веб-API XMLHttpRequest (XHR) предоставляет возможность выполнять фактический асинхронный запрос и использует AJAX для обработки данных из запроса.

Данный блок кода является базовым примером того, как выполняется HTTP-запрос GET по указанному URL-адресу.

const xhr = new XMLHttpRequest();
xhr.open('GET', 'mysite.com/api/getjson'

=====================================================================

Строка запроса в URL
Строки запроса используются для отправки на сервер дополнительной информации во время HTTP-запроса GET.

Строка запроса отделяется от исходного URL-адреса знаком вопроса ?.

В строке запроса может быть одна или несколько пар "ключ-значение", соединенных символом равенства =.

Для разделения нескольких пар ключ-значение используется символ амперсанда &.

Строки запроса должны иметь кодировку URL в случае наличия небезопасных символов URL.

const requestUrl = 'http://mysite.com/api/vendor?name=kavin&id=35412';
===========================================================================================

XMLHttpRequest Требования к GET-запросу
Для выполнения HTTP-запроса GET с помощью JavaScript XMLHttpRequestAPI необходимо указать тип запроса, тип ответа, URL-адрес запроса и обработчик данных ответа .

URL-адрес может содержать дополнительные данные в строке запроса. Для запроса HTTP GET тип запроса должен быть GET.


const req = new XMLHttpRequest();
req.responseType = 'json';
req.open('GET', '/myendpoint/getdata?id=65');
req.onload = () => {
  console.log(req.response);
};
 
req.send();

====================================================================================

HTTP-запрос POST с XMLHttpRequestAPI
Чтобы сделать HTTP-запрос POST с помощью JavaScript XMLHttpRequestAPI, необходимо указать тип запроса, тип ответа, URL-адрес запроса, тело запроса и обработчик данных ответа. Тело запроса важно, потому что информация, отправленная с помощью метода POST, не отображается в URL-адресе. Тип запроса должен быть POSTдля этого случая. Тип ответа может быть разнообразным, включая буфер массива, json и т. Д.

=====================================================================================

const data = {
  fish: 'Salmon',
  weight: '1.5 KG',
  units: 5
};
const xhr = new XMLHttpRequest();
xhr.open('POST', '/inventory/add');
xhr.responseType = 'json';
xhr.send(JSON.stringify(data));
 
xhr.onload = () => {
  console.log(xhr.response);
};

===========================================================================

ОК, API получения свойств
В Fetch функции API свойство проверки ответа , чтобы увидеть , если это имеет значение или . В примере кода свойство будет, когда HTTP-запрос будет успешным. Имущество будет , когда запрос HTTP неудачен.fetch()oktruefalse.oktrue.okfalse


    fetch(url, {
    method: 'POST',
    headers: {
      'Content-type': 'application/json',
      'apikey': apiKey
    },
    body: data
  }).then(response => {
    if (response.ok) {
      return response.json();
    }
    throw new Error('Request failed!');
  }, networkError => {
    console.log(networkError.message)
  })
}

==============================================================================

Текст ответа в формате JSON
.json()Метод рассосется возвращенного обещание объекта JSON, разбор текста тела как JSON.

В примере блока кода показан .json()метод, который возвращает обещание, которое преобразуется в тело ответа в формате JSON как объект JavaScript.


fetch('url-that-returns-JSON')
.then(response => response.json())
.then(jsonResponse => {
  console.log(jsonResponse);
});

=====================================================================


api получения параметра URL-адреса обещания
API-интерфейс JavaScript Fetch используется для доступа и управления запросами и ответами в конвейере HTTP, асинхронно извлекая ресурсы по сети.

Базовый fetch()запрос примет параметр URL, отправит запрос и будет содержать функцию обработчика обещаний успеха и сбоя.

В этом примере блок кода начинается с вызова fetch()функции. Затем then()метод привязывается к концу fetch(). Он заканчивается обратным вызовом ответа для обработки успеха и обратным вызовом отклонения для обработки сбоя.


fetch('url')
.then(
  response  => {
    console.log(response);
  },
 rejection => {
    console.error(rejection.message);
);

========================================================================

Получить функцию API
Функцию Fetch API fetch()можно использовать для создания запросов. Принимая дополнительные аргументы, запрос можно настроить. Это можно использовать для изменения типа запроса, заголовков, указания тела запроса и многого другого, как показано в примере блока кода.

fetch('https://api-to-call.com/endpoint', {
  method: 'POST',
 body: JSON.stringify({id: "200"})
}).then(response => {
  if(response.ok){
      return response.json();  
  }
    throw new Error('Request failed!');
}, networkError => {
  console.log(networkError.message);
}).then(jsonResponse => {
  console.log(jsonResponse);
})

======================================================================

синтаксис async await
Асинхронный ... Await синтаксис используется с JS Fetch API fetch()для работы с обещаниями. В примере блока кода мы видим, что ключевое слово asyncпомещает функцию. Это означает, что функция вернет обещание. Ключевое слово awaitзаставляет JavaScript ждать, пока проблема не будет решена.

const getSuggestions = async () => {
  const wordQuery = inputField.value;
  const endpoint = `${url}${queryParams}${wordQuery}`;
  try{
const response = __~await~__ __~fetch(endpoint, {cache: 'no-cache'});
    if(response.ok){
      const jsonResponse = await response.json()
    }
  }
  catch(error){
    console.log(error)
  }
}

